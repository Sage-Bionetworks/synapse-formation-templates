{
    "$id": "http://example.com/root.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Synapse Formation Template",
    "description": "This schema will assist with forming Synapse projects",
    "definitions": {
        "annotations": {
            "type": "object",
            "desciption": "Synapse annotations"
        },
        "folder": {
            "type": "object",
            "required": [
                "name"
            ],
            "properties": {
                "name": { "type": "string" },
                "Folder": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/folder" },
                    "default": []
                },
                "File": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/file" },
                    "default": []
                }
            }
        },
        "file": {
            "type": "object",
            "required": [
                "name",
                "filepath"
            ],
            "properties": {
                "name": { "type": "string" },
                "filepath": { "type": "string" }
            }
        },
        "permission": {
            "type": "object",
            "required": [
                "Team",
                "acl"
            ],
            "properties": {
                "Team": { "type": "string" },
                "acl": {
                    "type": "string",
                    "title": "The acl Schema",
                    "enum": [
                        "admin",
                        "view",
                        "edit",
                        "edit_and_delete",
                        "download"
                    ]
                }
            }
        }
    },
    "type": "object",
    "required": [
        "Project",
        "Team"
    ],
    "properties": {
        "Project": {
            "type": "object",
            "required": [
                "name",
                "permission",
                "Folder",
                "Forum",
                "Challenge",
                "Table",
                "annotations",
                "Evaluation",
                "Wiki"
            ],
            "properties": {
                "name": { "type": "string" },
                "permission": { "$ref": "#/definitions/permission" },
                "Folder": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/folder" }
                },
                "Forum": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [ "Thread" ],
                        "properties": {
                            "Thread": {
                                "type": "object",
                                "required": [
                                    "title",
                                    "messageMarkdown"
                                ],
                                "properties": {
                                    "title": { 
                                        "type": "string",
                                        "description": "Title of thread"
                                    },
                                    "messageMarkdown": {
                                        "type": "string",
                                        "description": "Thread text in Synapse markdown format"
                                    },
                                    "Reply": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [ "messageMarkdown" ],
                                            "properties": {
                                                "messageMarkdown": {
                                                    "type": "string",
                                                    "description": "Reponse to thread in Synapse markdown format"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Challenge": {
                    "type": "object",
                    "description": "Creation of Synapse Challenge object",
                    "required": [
                        "Team"
                    ],
                    "properties": {
                        "Team": {
                            "type": "string",
                            "description": "Synapse Team name"
                        }
                    }
                },
                "Table": {
                    "type": "array",
                    "description": "Create Synapse Tables",
                    "items": {
                        "type": "object",
                        "required": [
                            "name",
                            "Column"
                        ],
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "Synapse Table name"
                            },
                            "annotations": { "$ref": "#/definitions/annotations" },
                            "Column": {
                                "$id": "#/properties/Project/properties/Table/items/properties/Column",
                                "type": "array",
                                "title": "The Column Schema",
                                "items": {
                                    "$id": "#/properties/Project/properties/Table/items/properties/Column/items",
                                    "type": "object",
                                    "title": "The Items Schema",
                                    "required": [
                                        "name",
                                        "defaultValue",
                                        "maximumSize",
                                        "columnType",
                                        "facetType"
                                    ],
                                    "properties": {
                                        "name": {
                                            "$id": "#/properties/Project/properties/Table/items/properties/Column/items/properties/name",
                                            "type": "string",
                                            "title": "The Name Schema",
                                            "default": "",
                                            "examples": [
                                                "column1"
                                            ],
                                            "pattern": "^(.*)$"
                                        },
                                        "defaultValue": {
                                            "$id": "#/properties/Project/properties/Table/items/properties/Column/items/properties/defaultValue",
                                            "type": "string",
                                            "title": "The Defaultvalue Schema",
                                            "default": "",
                                            "examples": [
                                                "temp"
                                            ],
                                            "pattern": "^(.*)$"
                                        },
                                        "maximumSize": {
                                            "$id": "#/properties/Project/properties/Table/items/properties/Column/items/properties/maximumSize",
                                            "type": "integer",
                                            "title": "The Maximumsize Schema",
                                            "default": 0,
                                            "examples": [
                                                1000
                                            ]
                                        },
                                        "columnType": {
                                            "$id": "#/properties/Project/properties/Table/items/properties/Column/items/properties/columnType",
                                            "type": "string",
                                            "title": "The Columntype Schema",
                                            "default": "",
                                            "examples": [
                                                "STRING"
                                            ],
                                            "pattern": "^(.*)$"
                                        },
                                        "facetType": {
                                            "$id": "#/properties/Project/properties/Table/items/properties/Column/items/properties/facetType",
                                            "type": "string",
                                            "title": "The Facettype Schema",
                                            "default": "",
                                            "examples": [
                                                "enumeration"
                                            ],
                                            "pattern": "^(.*)$"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "annotations": {
                    "$id": "#/properties/Project/properties/annotations",
                    "type": "object",
                    "title": "The Annotations Schema",
                    "required": [
                        "key"
                    ],
                    "properties": {
                        "key": {
                            "$id": "#/properties/Project/properties/annotations/properties/key",
                            "type": "string",
                            "title": "The Key Schema",
                            "default": "",
                            "examples": [
                                "pair"
                            ],
                            "pattern": "^(.*)$"
                        }
                    }
                },
                "Evaluation": {
                    "$id": "#/properties/Project/properties/Evaluation",
                    "type": "array",
                    "title": "The Evaluation Schema",
                    "items": {
                        "$id": "#/properties/Project/properties/Evaluation/items",
                        "type": "object",
                        "title": "The Items Schema",
                        "required": [
                            "name",
                            "description",
                            "submissionInstructionsMessage",
                            "submissionReceiptMessage",
                            "quota",
                            "permission"
                        ],
                        "properties": {
                            "name": {
                                "$id": "#/properties/Project/properties/Evaluation/items/properties/name",
                                "type": "string",
                                "title": "The Name Schema",
                                "default": "",
                                "examples": [
                                "test queue"
                                ],
                                "pattern": "^(.*)$"
                            },
                            "description": {
                                "$id": "#/properties/Project/properties/Evaluation/items/properties/description",
                                "type": "string",
                                "title": "The Description Schema",
                                "default": "",
                                "examples": [
                                "This is a testing queue"
                                ],
                                "pattern": "^(.*)$"
                            },
                            "submissionInstructionsMessage": {
                                "$id": "#/properties/Project/properties/Evaluation/items/properties/submissionInstructionsMessage",
                                "type": "string",
                                "title": "The Submissioninstructionsmessage Schema",
                                "default": "",
                                "examples": [
                                    "Instrucitons here"
                                ],
                                "pattern": "^(.*)$"
                            },
                            "submissionReceiptMessage": {
                                "$id": "#/properties/Project/properties/Evaluation/items/properties/submissionReceiptMessage",
                                "type": "string",
                                "title": "The Submissionreceiptmessage Schema",
                                "default": "",
                                "examples": [
                                    "Successful submission!"
                                ],
                                "pattern": "^(.*)$"
                            },
                            "quota": {
                                "$id": "#/properties/Project/properties/Evaluation/items/properties/quota",
                                "type": "object",
                                "title": "The Quota Schema",
                                "properties": {
                                    "firstRoundStart": {
                                        "$id": "#/properties/Project/properties/Evaluation/items/properties/quota/properties/firstRoundStart",
                                        "type": "integer",
                                        "title": "The Firstroundstart Schema",
                                        "default": 0,
                                        "examples": [
                                            11111
                                        ]
                                    },
                                    "roundDurationMillis": {
                                        "$id": "#/properties/Project/properties/Evaluation/items/properties/quota/properties/roundDurationMillis",
                                        "type": "integer",
                                        "title": "The Rounddurationmillis Schema",
                                        "default": 0,
                                        "examples": [
                                            1
                                        ]
                                    },
                                    "numberOfRounds": {
                                        "$id": "#/properties/Project/properties/Evaluation/items/properties/quota/properties/numberOfRounds",
                                        "type": "integer",
                                        "title": "The Numberofrounds Schema",
                                        "default": 0,
                                        "examples": [
                                            2
                                        ]
                                    },
                                    "submissionLimit": {
                                        "$id": "#/properties/Project/properties/Evaluation/items/properties/quota/properties/submissionLimit",
                                        "type": "integer",
                                        "title": "The Submissionlimit Schema",
                                        "default": 0,
                                        "examples": [
                                            5
                                        ]
                                    }
                                }
                            },
                            "permission": { "$ref": "#/definitions/permission" }
                        }
                    }
                },
                "Wiki": {
                    "$id": "#/properties/Project/properties/Wiki",
                    "type": "object",
                    "title": "The Wiki Schema",
                    "properties": {
                        "WikiTemplate": {
                            "$id": "#/properties/Project/properties/Wiki/properties/WikiTemplate",
                            "type": "string",
                            "title": "The Wikitemplate Schema",
                            "default": "",
                            "examples": [
                                "syn18058986"
                            ],
                            "pattern": "^(.*)$"
                        },
                        "structure": {
                            "$id": "#/properties/Project/properties/Wiki/properties/structure",
                            "type": "array",
                            "title": "The Structure Schema",
                            "items": {
                                "$id": "#/properties/Project/properties/Wiki/properties/structure/items",
                                "type": "object",
                                "title": "The Items Schema",
                                "required": [
                                    "title",
                                    "markdown",
                                    "subwiki"
                                ],
                                "properties": {
                                    "title": {
                                        "$id": "#/properties/Project/properties/Wiki/properties/structure/items/properties/title",
                                        "type": "string",
                                        "title": "The Title Schema",
                                        "default": "",
                                        "examples": [
                                            "My wiki"
                                        ],
                                        "pattern": "^(.*)$"
                                    },
                                    "markdown": {
                                        "$id": "#/properties/Project/properties/Wiki/properties/structure/items/properties/markdown",
                                        "type": "string",
                                        "title": "The Markdown Schema",
                                        "default": "",
                                        "examples": [
                                            "My markdown"
                                        ],
                                        "pattern": "^(.*)$"
                                    },
                                    "subwiki": {
                                        "$id": "#/properties/Project/properties/Wiki/properties/structure/items/properties/subwiki",
                                        "type": "array",
                                        "title": "The Subwiki Schema",
                                        "items": {
                                        "$id": "#/properties/Project/properties/Wiki/properties/structure/items/properties/subwiki/items",
                                        "type": "object",
                                        "title": "The Items Schema",
                                        "required": [
                                            "title",
                                            "markdown",
                                            "subwiki"
                                        ],
                                        "properties": {
                                            "title": {
                                                "$id": "#/properties/Project/properties/Wiki/properties/structure/items/properties/subwiki/items/properties/title",
                                                "type": "string",
                                                "title": "The Title Schema",
                                                "default": "",
                                                "examples": [
                                                    "subwiki"
                                                ],
                                                "pattern": "^(.*)$"
                                            },
                                            "markdown": {
                                            "$id": "#/properties/Project/properties/Wiki/properties/structure/items/properties/subwiki/items/properties/markdown",
                                            "type": "string",
                                            "title": "The Markdown Schema",
                                            "default": "",
                                            "examples": [
                                                "subwiki content"
                                            ],
                                            "pattern": "^(.*)$"
                                            },
                                            "subwiki": {
                                                "$id": "#/properties/Project/properties/Wiki/properties/structure/items/properties/subwiki/items/properties/subwiki",
                                                "type": "array",
                                                "title": "The Subwiki Schema"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "Team": {
            "$id": "#/properties/Team",
            "type": "array",
            "title": "The Team Schema",
            "items": {
                "$id": "#/properties/Team/items",
                "type": "object",
                "title": "The Items Schema",
                "required": [
                    "name",
                    "description",
                    "canPublicJoin",
                    "invitees"
                ],
                "properties": {
                    "name": {
                        "$id": "#/properties/Team/items/properties/name",
                        "type": "string",
                        "title": "The Name Schema",
                        "default": "",
                        "examples": [
                            "teamA"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "description": {
                        "$id": "#/properties/Team/items/properties/description",
                        "type": "string",
                        "title": "The Description Schema",
                        "default": "",
                        "examples": [
                            "This is a testing team"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "canPublicJoin": {
                        "$id": "#/properties/Team/items/properties/canPublicJoin",
                        "type": "boolean",
                        "title": "The Canpublicjoin Schema",
                        "default": false,
                        "examples": [
                            true
                        ]
                    },
                    "invitees": {
                        "$id": "#/properties/Team/items/properties/invitees",
                        "type": "array",
                        "title": "The Invitees Schema",
                        "items": {
                            "$id": "#/properties/Team/items/properties/invitees/items",
                            "type": "string",
                            "title": "The Items Schema",
                            "default": "",
                            "examples": [
                                "thomas.yu"
                            ],
                            "pattern": "^(.*)$"
                        }
                    }
                }
            }
        }
    }
}